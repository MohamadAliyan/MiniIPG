# ๐ณ Payment Gateway Microservices System

## ๐งฉ 1. ุดุฑุญ ูพุฑูฺู

### ๐ฏ ูุฏู ูพุฑูฺู
ุงู ูพุฑูฺู ฺฉ **ุฏุฑฺฏุงู ูพุฑุฏุงุฎุช ุขุฒูุงุด** ุงุณุช ฺฉู ุจุง ูุนูุงุฑ **Microservices + Clean Architecture** ุทุฑุงุญ ุดุฏู ุงุณุช.  
ฺฉุงุฑุจุฑ ุงุฒ ุทุฑู Gateway ูุงุฑุฏ  ุตูุญู ูพุฑุฏุงุฎุช ุดุฏู ู ูพุณ ุงุฒ ุงูุฌุงู ุนููุงุช ูพุฑุฏุงุฎุช (ูููู ุง ูุงูููู)ุ  
ูุชุฌู ุชุฑุงฺฉูุด ุจู ุณุฑูุณ Payment ุงุฑุณุงู ู ูุถุนุช ุจูโุฑูุฒุฑุณุงู ูโุดูุฏ.

ุฏุฑ ููุงุช ุณุฑูุณ Notification ุงุฒ ุทุฑู RabbitMQ ุฑูุฏุงุฏูุง ุฑุง ุฏุฑุงูุช ฺฉุฑุฏู ู ูุงฺฏ ุง Callback ุงูุฌุงู ูโุฏูุฏ.

---------------------------

### ๐๏ธ ูุนูุงุฑ ุงุณุชูุงุฏูโุดุฏู
- **Clean Architecture** (Domain, Application, Infrastructure, API)
- **CQRS + MediatR** ุจุฑุง ุฌุฏุงุณุงุฒ Command/Query
- **Microservices Architecture** ุจุง ุณู ุณุฑูุณ ูุณุชูู:
  1. **Payment Service** (ูพูุฑุช 5001)
     - ูุฏุฑุช ุชุฑุงฺฉูุดโูุง ู Tokenูุง  
     - ุงุฑุชุจุงุท ุจุง ุฏุชุงุจุณ  
     - ุงุฑุณุงู ุฑูุฏุงุฏ ุจู RabbitMQ  
     - Background Job ุจุฑุง ุงููุถุง ูพุฑุฏุงุฎุชโูุง  
  2. **Gateway Service** (ูพูุฑุช 5002)
     - ุดุจูโุณุงุฒ ุฏุฑฺฏุงู ุจุงูฺฉ  
     - ุดุจูโุณุงุฒ ูพุฑุฏุงุฎุช ูููู/ูุงูููู  
     - ุงุฑุชุจุงุท ุจุง Payment ุงุฒ ุทุฑู HTTP (Refit) ุง RabbitMQ  
  3. **Notification Service** (ูพูุฑุช 5003)
     - ุฏุฑุงูุช ูพุงูโูุง RabbitMQ  
     - ุซุจุช ูุงฺฏ ุง ุงุฑุณุงู Callback ุจู RedirectUrl  

-----------------------------------------

### ๐งฐ ุชฺฉููููฺโูุง ุจูโฺฉุงุฑุฑูุชู
| ุฏุณุชู | ุงุจุฒุงุฑ / ูุฑูโูุฑฺฉ |
|------|-------------------|
| Backend | .NET 8, ASP.NET Core Web API |
| Messaging | RabbitMQ (v7.1.2) |
| Background Jobs | Hangfire |
| HTTP Client | Refit |
| Validation | FluentValidation |
| ORM / DB Access | Dapper / EFCore (ูุงุจู ุชูุธู) |
| Testing | xUnit, Moq, FluentAssertions | Swagger
| Logging | Serilog (File Sink) |
----------------------------------------------------------
ุงุฌุฑุง ูุฑ ุณุฑูุณ:

cd PaymentService.Api
dotnet run --urls=http://localhost:5001

cd GatewayService.Api
dotnet run --urls=http://localhost:5002

cd NotificationService.Api
dotnet run --urls=http://localhost:5003
-----------------------------------------------

ฺุฑุง ุงุฒ ุงู ุณุงุฎุชุงุฑ ุงุณุชูุงุฏู ุดุฏูุ

ุฌุฏุงุณุงุฒ ูุงุจุณุชฺฏโูุง (Separation of Concerns)

ุชุณุชโูพุฐุฑ ุจุงูุง ุจูโูุงุณุทู MediatR ู Mockable Interfaces

ููุงุณโูพุฐุฑ ุจุง ุงุณุชูุงุฏู ุงุฒ RabbitMQ ุจุฑุง ุงุฑุชุจุงุทุงุช ูุงููุฒูุงู

ุงูุนุทุงู ุฏุฑ ุชูุณุนูุ ูุฑ ุณุฑูุณ ูโุชูุงูุฏ ูุณุชูู ูุณุชูุฑ (Deploy) ุดูุฏ

-----------------------------------------------
ฺุงูุดโูุง ูพุงุฏูโุณุงุฒ

ููุงููฺฏ ุจู ุณุฑูุณโูุง (Sync ู Async)

ูุฏุฑุช ูุถุนุชโูุง ูุฎุชูู ุชุฑุงฺฉูุด (Pending, Success, Failed, Expired)

ูพุงุฏูโุณุงุฒ ูุตุฑูโฺฉููุฏู RabbitMQ ุจุง ูุณุฎู ุฌุฏุฏ (ุจุฏูู IModel)

ูุฏุฑุช ุฎุทุงูุง Refit ู ุจุงุฒฺฏุดุช ูพุงุณุฎ ุงุณุชุงูุฏุงุฑุฏ ุฏุฑ ูููโ APIูุง
--------------------------------------------------------
ุจูุจูุฏูุง ูพุดููุงุฏ ุฏุฑ ุขูุฏู

ุงูุฒูุฏู Authentication/Authorization (JWT ุง API Key)

ูพุงุฏูโุณุงุฒ Polly Retry Policy ุจุฑุง ุงุฑุชุจุงุทุงุช HTTP

ุฐุฎุฑู ูุงฺฏโูุง ุฏุฑ Elastic Stack ุง Seq

ุงูุฒูุฏู Observability (Prometheus + Grafana)

ุงูุฒูุฏู Integration Tests ุจุฑุง Gateway-Payment Flow
